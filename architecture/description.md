Будем выделять 4 основные компоненты:

* Session
* Parser
* Expanser
* Executor

**Session** хранит в себе информацию о текущей сессии интерпретатора, например, значения переменных. Также она ответственна за выход из интерпретатора.

**Parser** проверяет синтаксическую корректность введенного выражения. В нем реализованы классы для промежуточного представления команды(_CmdIR_) и объявления переменной(_VarDecl_). Если выражение является декларацией, то обновляем состояние новым значением данной переменной. Если выражение - команда, то разбиваем ее по символу |, получив _list[CmdIR]_.

**Expanser** подставит вместо переменных их значения, кроме случая, если переменная заключена в одинарные кавычки. Отметим, чтобы это сделать, ему необходим доступ к состояни, в то время как другим сущностям это не требуется.

**Executor** занимается исполнением команды. В модуле имеется абстрактный класс CmdExecutor от которого наследуется executor-ы для каждой команды, в том числе и для внешнего процесса. Имеется абстрактный метод execute, который каждый класс должен переопределить в соответствии с ожидаемым поведением команды. Этот метод принимает входной поток, а возвращает выходной с результатом команды. То есть сначала каждому элементу списока команд (_list[CmdIR]_}) сопоставялется нужный executor. Затем поочередно выполянем все команды, не забывая то, что выходной поток для текущей команды является входным потоком для следующей.

В результате **Session** получает обратно выходной поток, из которого печатает значние.
