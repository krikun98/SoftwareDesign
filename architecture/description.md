Будем выделять 4 основные компоненты:

* Session
* Parser
* Expanser
* Executor

**Session** хранит в себе информацию о текущей сессии интерпретатора, например, значения переменных. Также она ответственна за выход из интерпретатора.

**Parser** определит является ли введенная строка объявлением переменной или командой. Если это команда, то он разобьет по пайпам и даст обработать эту строку Expanser-у. В модуле Parser реализованы абстрактнйы класс для промежуточного представления команды(_CmdIR_) и класс для объявления переменной(_VarDecl_). От _CmdIR_ наследуется парсеры - каждый для своей конкретной команды, чтобы сама команда разбиралась какой аргумент чем является и каким образом нужно обрбатывать ключи.

**Expanser** подставит вместо переменных их значения, кроме случая, если переменная заключена в одинарные кавычки. Отметим, чтобы это сделать, ему необходим доступ к состоянию, в то время как другим сущностям это не требуется.

После того, как промежуточное предствление было собрано, оно как `list[CmdIR]` отправляется в Executor.

**Executor** занимается исполнением команды. В модуле имеется абстрактный класс CmdExecutor от которого наследуется executor-ы для каждой команды, в том числе и для внешнего процесса. Имеется абстрактный метод execute, который каждый класс должен переопределить в соответствии с ожидаемым поведением команды. Этот метод принимает входной поток, а возвращает выходной с результатом команды. То есть сначала каждому элементу списока команд (_list[CmdIR]_}) сопоставялется нужный executor. Затем поочередно выполянем все команды, не забывая то, что выходной поток для текущей команды является входным потоком для следующей.

В результате **Session** получает обратно выходной поток, из которого печатает значение.
